app.controller("users",["$scope","userAPIService","routeService","dialogService",function(n,t,i,r){function u(){t.getUsers(n.paginationConf.currentPage,n.paginationConf.itemsPerPage).then(function(t){n.paginationConf.totalItems=t.data.recordCount;n.users=t.data.users})}n.paginationConf={currentPage:1,itemsPerPage:20};n.users=null;n.delete=function(n){t.deleteUser(n).then(function(){u()},function(n){n.status==500?i.goParams("error"):n.status==404?i.goParams("error",{msg:encodeURIComponent("您请求的数据不存在，请返回首页重新浏览")}):n.status==400?r.showMention(1,n.data[0].message):n.status==401?i.goParams("login"):i.goParams("error")})};n.detail=function(n){i.goParams("user_edit",{userId:n})};n.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",function(){n.paginationConf.currentPage!=0&&u()})}]);